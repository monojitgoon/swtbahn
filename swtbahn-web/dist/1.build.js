webpackJsonp([1],{264:function(e,t,s){"use strict";var r=s(84),a=s.n(r),i=s(85),n=s.n(i),o=s(23),l=s.n(o),d=s(283),c=s.n(d),u=s(15),v=s.n(u),p=s(22),m=s(41),h=s.n(m);t.a={name:"driverboard",data:function(){return{routerequest:{startingsegment:"",endingsegment:"",controller:!0},submitted:!1,showModal:!1,selectedTrain:null,speed:0,interval:null,isPlaying:!1}},computed:v()({color:function(){return this.speed<20?"indigo":this.speed<40?"teal":this.speed<70?"green":this.speed<100?"orange":"red"},animationDuration:function(){return 20/this.speed+"s"}},Object(p.c)({system:function(e){return e.system},alert:function(e){return e.alert},monitor:function(e){return e.monitor}})),mounted:function(){var e=this;this.GetCurrentServerSessionId(this.system.sessionID),this.InitialSpeedValueLoad(),setTimeout(function(){this.AsyncUpdate()}.bind(this),1e4),this.system.driverboardRequestInterval=setInterval(function(){e.AsyncUpdate()},h.a.system_driverboard_RequestInterval)},beforeDestroy:function(){clearInterval(this.system.driverboardRequestInterval)},methods:v()({},Object(p.b)("system",["updateDriverProps","GetPeripheralsArray","updateDriverPropsPostRelease","updateTrainProps","updatePeripheralState","registerRouteRequest","getSingleRouteRequest","GetCurrentServerSessionId"]),Object(p.b)("monitor",["GetTrainsArray","GetSegmentsArray","GetTrainStateArray"]),Object(p.b)("alert",["error","clear"]),{InitialSpeedValueLoad:function(){c()(this.system.trainProperties.train_Speed)||this.system.trainProperties.train_Speed>0?(this.speed=this.system.trainProperties.train_Speed,this.isPlaying=this.system.trainProperties.train_IsPlaying):(this.speed=0,this.isPlaying=!1)},SliderSpeedChange:function(){this.isPlaying&&this.SetDCCSpeed(this.speed)},decrement:function(){this.speed--,this.isPlaying&&this.SetDCCSpeed(this.speed)},increment:function(){this.speed++,this.isPlaying&&this.SetDCCSpeed(this.speed)},toggle:function(){this.isPlaying=!this.isPlaying,this.isPlaying?(this.speed=0==this.speed?1:this.speed,this.SetDCCSpeed(this.speed)):(this.speed=0,this.SetDCCSpeed(this.speed))},ForceStop:function(){this.speed>0&&(this.isPlaying=!1,this.speed=0,this.SetDCCSpeed(this.speed))},AsyncUpdate:function(){this.GetTrainsArray(),this.GetSegmentsArray(),null!=this.system.driverProperties.trainID&&(this.GetTrainStateArray(this.system.driverProperties.trainID),this.GetPeripheralsArray(this.system.driverProperties.trainID),this.getSingleRouteRequest(this.system.driverProperties.grabID))},AddRouteRequest:function(){this.clear(),null!=this.system.driverProperties.trainID&&0===l()(this.system.trainRouteRequestArray).length?this.showModal=!0:this.error("No train is grabbed or one route request is already sent!")},handleSubmit:function(e){var t=this;this.GetCurrentServerSessionId(this.system.sessionID),this.submitted=!0,this.$validator.validate().then(function(e){e&&(t.showModal=!1,t.registerRouteRequest({sessionid:t.system.sessionID,grabid:t.system.driverProperties.grabID,routerequest:t.routerequest}))})},GrabTrainClicked:function(e){null!=e?-1===this.system.driverProperties.grabID?(this.GetCurrentServerSessionId(this.system.sessionID),this.updateDriverProps(e)):this.error("You can only grab one train!"):this.error("No train has been selected!")},ReleaseTrain:function(){var e=this;return n()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.GetCurrentServerSessionId(e.system.sessionID);case 2:return t.next=4,e.ForceStop();case 4:return t.next=6,e.updateDriverPropsPostRelease({sessionid:e.system.sessionID,grabid:e.system.driverProperties.grabID});case 6:case"end":return t.stop()}},t,e)}))()},SetDCCSpeed:function(e){var t=this;return n()(a.a.mark(function s(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.GetCurrentServerSessionId(t.system.sessionID);case 2:return s.next=4,t.updateTrainProps({sessionid:t.system.sessionID,grabid:t.system.driverProperties.grabID,speed:e});case 4:case"end":return s.stop()}},s,t)}))()},ChangePeripheralState:function(e,t){var s=this;return n()(a.a.mark(function r(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.GetCurrentServerSessionId(s.system.sessionID);case 2:return r.next=4,s.updatePeripheralState({sessionid:s.system.sessionID,grabid:s.system.driverProperties.grabID,peripheralid:e,peripheralstate:"on"==t?0:1,trainid:s.system.driverProperties.trainID});case 4:case"end":return r.stop()}},r,s)}))()}})}},281:function(e,t,s){var r=s(282);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s(6)("7069a834",r,!0,{})},282:function(e,t,s){t=e.exports=s(1)(!1),t.push([e.i,"",""])},283:function(e,t,s){e.exports={default:s(284),__esModule:!0}},284:function(e,t,s){s(285),e.exports=s(2).Number.isNaN},285:function(e,t,s){var r=s(7);r(r.S,"Number",{isNaN:function(e){return e!=e}})},286:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animated fadeIn"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[e.alert.message?s("div",{class:"alert "+e.alert.type},[e._v(e._s(e.alert.message))]):e._e()])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6"},[s("card",{attrs:{"header-text":"Train Options"}},[s("div",{staticClass:"card-body card-block"},[s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col col-md-3"},[s("label",{staticClass:"form-control-label",attrs:{for:"select"}},[e._v("Select Train")])]),e._v(" "),s("div",{staticClass:"col col-md-3"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTrain,expression:"selectedTrain"}],staticClass:"form-control",attrs:{id:"trainList"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedTrain=t.target.multiple?s:s[0]}}},e._l(this.monitor.trainArray,function(t){return s("option",{key:t.trainid,domProps:{value:t.trainid}},[e._v(e._s(t.trainid))])}),0)]),e._v(" "),s("div",{staticClass:"col col-md-2"},[s("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Grab"},on:{click:function(t){e.GrabTrainClicked(e.selectedTrain)}}})]),e._v(" "),s("div",{staticClass:"col col-md-2"},[s("input",{staticClass:"btn btn-outline-success",attrs:{type:"submit",value:"Release"},on:{click:e.ReleaseTrain}})])])])]),e._v(" "),s("v-tabs",{attrs:{color:"white","slider-color":"yellow"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("v-tab",{attrs:{ripple:""}},[e._v("Current Route Requests")]),e._v(" "),s("v-tab-item",[s("v-card",{attrs:{flat:""}},[s("div",{staticClass:"col col-md-12"},[s("input",{staticClass:"btn btn-info pull-right",staticStyle:{"margin-top":"20px"},attrs:{type:"submit",value:"Add Route Request"},on:{click:e.AddRouteRequest}})]),e._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped first-td-padding"},[s("thead",[s("tr",[s("td",[e._v("Train Name")]),e._v(" "),s("td",[e._v("Starting Segment")]),e._v(" "),s("td",[e._v("Ending Segment")]),e._v(" "),s("td",[e._v("Path Details")]),e._v(" "),s("td",[e._v("Status")])])]),e._v(" "),s("tbody",e._l(this.system.trainRouteRequestArray,function(t){return s("tr",{key:t.trainid},[s("td",[e._v(e._s(t.trainid))]),e._v(" "),s("td",[e._v(e._s(t.startingsegment))]),e._v(" "),s("td",[e._v(e._s(t.endingsegment))]),e._v(" "),s("td",[e._v(e._s(t.path))]),e._v(" "),s("td",[e._v(e._s(t.status))])])}),0)])])])],1),e._v(" "),s("v-tab",{attrs:{ripple:""}},[e._v("Peripherals")]),e._v(" "),s("v-tab-item",[s("v-card",{attrs:{flat:""}},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped first-td-padding"},[s("thead",[s("tr",[s("td",[e._v("Peripheral Name")]),e._v(" "),s("td",[e._v("State")]),e._v(" "),s("td",[e._v("Change Peripheral State")])])]),e._v(" "),s("tbody",e._l(this.system.trainPeripheralArray,function(t){return s("tr",{key:t.peripheralid},[s("td",[e._v(e._s(t.peripheralid))]),e._v(" "),s("td",[e._v(e._s(t.state))]),e._v(" "),s("td",[s("input",{staticClass:"btn btn-warning",attrs:{type:"submit",value:"Toggle State"},on:{click:function(s){e.ChangePeripheralState(t.peripheralid,t.state)}}})])])}),0)])])])],1)],1)],1),e._v(" "),s("div",{staticClass:"col-lg-6"},[s("aside",{staticClass:"profile-nav alt"},[s("section",{staticClass:"card"},e._l(this.monitor.trainstateArray,function(t){return s("ul",{key:t.ontrack,staticClass:"list-group list-group-flush",attrs:{value:t.ontrack}},[s("li",{staticClass:"list-group-item"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-train"}),e._v(" OnTrack\n                "),s("span",{staticClass:"badge badge-primary pull-right"},[e._v(e._s(t.ontrack))])])]),e._v(" "),s("li",{staticClass:"list-group-item"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-compass"}),e._v(" Direction\n                "),s("span",{staticClass:"badge badge-danger pull-right"},[e._v(e._s(t.direction))])])]),e._v(" "),s("li",{staticClass:"list-group-item"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-arrow-circle-right"}),e._v(" Speed\n                "),s("span",{staticClass:"badge badge-success pull-right"},[e._v(e._s(t.dccspeed))])])])])}),0)]),e._v(" "),s("card",{attrs:{"header-text":"Speed Control"}},[s("vue-slider",{attrs:{speedValue:e.speed}},[s("h4",{attrs:{slot:"subheading"},slot:"subheading"},[e._v("Grabbed Train : "+e._s(this.system.driverProperties.trainID))]),e._v(" "),s("template",{slot:"transition"},[e.isPlaying?s("v-avatar",{staticClass:"mb-1 v-avatar--metronome",style:{animationDuration:e.animationDuration},attrs:{color:e.color,size:"12"}}):e._e()],1),e._v(" "),s("template",{slot:"playOrPauseButton"},[s("v-btn",{attrs:{color:e.color,dark:"",depressed:"",fab:""},on:{click:e.toggle}},[s("v-icon",{attrs:{large:""}},[e._v(e._s(e.isPlaying?"mdi-stop":"mdi-play"))])],1)],1),e._v(" "),s("template",{slot:"sliderdiv"},[s("v-slider",{attrs:{color:e.color,"always-dirty":"",min:"0",max:"127"},on:{change:e.SliderSpeedChange},model:{value:e.speed,callback:function(t){e.speed=t},expression:"speed"}},[s("v-icon",{attrs:{slot:"prepend",color:e.color},on:{click:e.decrement},slot:"prepend"},[e._v("mdi-minus")]),e._v(" "),s("v-icon",{attrs:{slot:"append",color:e.color},on:{click:e.increment},slot:"append"},[e._v("mdi-plus")])],1)],1)],2)],1)],1)]),e._v(" "),s("basix-modal",{directives:[{name:"show",rawName:"v-show",value:e.showModal,expression:"showModal"}]},[s("h4",{attrs:{slot:"title"},slot:"title"},[e._v("Grabbed Train Name :"+e._s(this.system.driverProperties.trainID))]),e._v(" "),s("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[s("card",{attrs:{"header-text":"Route Request"}},[e.alert.message?s("div",{class:"alert "+e.alert.type},[e._v(e._s(e.alert.message))]):e._e(),e._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-puzzle-piece"})]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.routerequest.startingsegment,expression:"routerequest.startingsegment"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.errors.has("startingsegment")},attrs:{name:"startingsegment"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.routerequest,"startingsegment",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("Select Starting Segment")]),e._v(" "),e._l(this.monitor.segmentArray,function(t){return s("option",{key:t.segmentid,domProps:{value:t.segmentid}},[e._v(e._s(t.segmentid))])})],2),e._v(" "),e.submitted&&e.errors.has("startingsegment")?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("startingsegment")))]):e._e()])]),e._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-puzzle-piece"})]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.routerequest.endingsegment,expression:"routerequest.endingsegment"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&e.errors.has("endingsegment")},attrs:{name:"endingsegment"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.routerequest,"endingsegment",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("Select Ending Segment")]),e._v(" "),e._l(this.monitor.segmentArray,function(t){return s("option",{key:t.segmentid,domProps:{value:t.segmentid}},[e._v(e._s(t.segmentid))])})],2),e._v(" "),e.submitted&&e.errors.has("endingsegment")?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("endingsegment")))]):e._e()])]),e._v(" "),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col col-md-3"},[s("label",{staticClass:"form-control-label"},[e._v("Controller")])]),e._v(" "),s("div",{staticClass:"col col-md-9"},[s("div",{staticClass:"form-check"},[s("div",{staticClass:"radio"},[s("label",{staticClass:"form-check-label",attrs:{for:"Manual"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.routerequest.controller,expression:"routerequest.controller"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-check-input",class:{"is-invalid":e.submitted&&e.errors.has("controller")},attrs:{type:"radio",id:"Manual",name:"Controller",value:"true",placeholder:"Controller"},domProps:{checked:e._q(e.routerequest.controller,"true")},on:{change:function(t){e.$set(e.routerequest,"controller","true")}}}),e._v("Manual\n                ")])]),e._v(" "),s("div",{staticClass:"radio"},[s("label",{staticClass:"form-check-label",attrs:{for:"Automated"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.routerequest.controller,expression:"routerequest.controller"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-check-input",class:{"is-invalid":e.submitted&&e.errors.has("controller")},attrs:{type:"radio",id:"Automated",name:"Controller",value:"false",placeholder:"Controller"},domProps:{checked:e._q(e.routerequest.controller,"false")},on:{change:function(t){e.$set(e.routerequest,"controller","false")}}}),e._v("Automated\n                ")])]),e._v(" "),e.submitted&&e.errors.has("controller")?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("controller")))]):e._e()])])])]),e._v(" "),s("div",{staticClass:"form-actions form-group"},[s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"},on:{click:e.handleSubmit}},[s("i",{staticClass:"fa fa-dot-circle-o"}),e._v(" Submit\n        ")]),e._v(" "),s("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"reset"},on:{click:function(t){e.showModal=!1}}},[s("i",{staticClass:"fa fa-ban"}),e._v(" Close\n        ")])])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{slot:"footer"},slot:"footer"})])],1)},a=[],i={render:r,staticRenderFns:a};t.a=i},91:function(e,t,s){"use strict";function r(e){s(281)}Object.defineProperty(t,"__esModule",{value:!0});var a=s(264),i=s(286),n=s(0),o=r,l=n(a.a,i.a,!1,o,null,null);t.default=l.exports}});
//# sourceMappingURL=1.build.js.map