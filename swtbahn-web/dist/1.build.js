webpackJsonp([1],{256:function(t,e,s){"use strict";var i=s(274),r=s.n(i),a=s(15),n=s.n(a),o=s(22);e.a={name:"driverboard",data:function(){return{routerequest:{startingsegment:"",endingsegment:""},submitted:!1,showModal:!1,selectedTrain:null,speed:0,interval:null,isPlaying:!1}},computed:n()({color:function(){return this.speed<20?"indigo":this.speed<40?"teal":this.speed<70?"green":this.speed<100?"orange":"red"},animationDuration:function(){return 20/this.speed+"s"}},Object(o.c)({system:function(t){return t.system},alert:function(t){return t.alert}})),created:function(){},mounted:function(){this.InitialSpeedValueLoad(),this.GetTrainsArray(),this.GetSegmentsArray(),this.RequestForTrainState(this.system.driverProperties.trainID),this.getSingleRouteRequest(this.system.driverProperties.grabID)},beforeDestroy:function(){clearInterval(this.system.RequestInterval)},methods:n()({},Object(o.b)("system",["StartServer","updateDriverProps","GetTrainsArray","GetSegmentsArray","GetPeripheralsArray","updateDriverPropsPostRelease","updateTrainProps","updatePeripheralState","updateTrainState","registerRouteRequest","getSingleRouteRequest"]),Object(o.b)("alert",["error","clear"]),{handleSubmit:function(t){var e=this;0!=this.system.sessionID?-1===this.system.driverProperties.grabID?this.error("There is no train grabbed yet!"):(this.submitted=!0,this.$validator.validate().then(function(t){t&&e.registerRouteRequest({sessionid:e.system.sessionID,grabid:e.system.driverProperties.grabID,routerequest:e.routerequest})})):this.error("Server Session is not valid anymore!")},InitialSpeedValueLoad:function(){r()(this.system.trainProperties.train_Speed)||this.system.trainProperties.train_Speed>0?(this.speed=this.system.trainProperties.train_Speed,this.isPlaying=this.system.trainProperties.train_IsPlaying):(this.speed=0,this.isPlaying=!1)},SliderSpeedChange:function(){this.isPlaying&&this.SetDCCSpeed(this.speed)},decrement:function(){this.speed--,this.isPlaying&&this.SetDCCSpeed(this.speed)},increment:function(){this.speed++,this.isPlaying&&this.SetDCCSpeed(this.speed)},toggle:function(){this.isPlaying=!this.isPlaying,this.isPlaying?(this.speed=0==this.speed?1:this.speed,this.SetDCCSpeed(this.speed)):(this.speed=0,this.SetDCCSpeed(this.speed))},ForceStop:function(){this.isPlaying=!1,this.speed=0,this.SetDCCSpeed(this.speed)},AddRouteRequest:function(){this.clear(),null!=this.system.driverProperties.trainID?this.showModal=!0:this.error("No train is grabbed yet!")},GrabTrainClicked:function(t){-1===this.system.driverProperties.grabID?(0===this.system.sessionID&&this.StartServer(),this.updateDriverProps(t),this.GetPeripheralsArray(t),this.RequestForTrainState(t)):this.error("You can only grab one train!")},ReleaseTrain:function(){0!=this.system.sessionID?-1===this.system.driverProperties.grabID?this.error("There is no train grabbed yet!"):(this.updateDriverPropsPostRelease({sessionid:this.system.sessionID,grabid:this.system.driverProperties.grabID}),this.ForceStop()):this.error("Server Session is not valid anymore!")},SetDCCSpeed:function(t){0!=this.system.sessionID?-1===this.system.driverProperties.grabID?this.error("There is no train grabbed yet!"):this.updateTrainProps({sessionid:this.system.sessionID,grabid:this.system.driverProperties.grabID,speed:t}):this.error("Server Session is not valid anymore!")},ChangePeripheralState:function(t,e){0!=this.system.sessionID?-1===this.system.driverProperties.grabID?this.error("There is no train grabbed yet!"):this.updatePeripheralState({sessionid:this.system.sessionID,grabid:this.system.driverProperties.grabID,peripheralid:t,peripheralstate:"on"==e?"off":"on",trainid:this.system.driverProperties.trainID}):this.error("Server Session is not valid anymore!")},RequestForTrainState:function(t){null!=t&&this.updateTrainState(t)}})}},272:function(t,e,s){var i=s(273);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(6)("6fa46c5d",i,!0,{})},273:function(t,e,s){e=t.exports=s(1)(!1),e.push([t.i,"",""])},274:function(t,e,s){t.exports={default:s(275),__esModule:!0}},275:function(t,e,s){s(276),t.exports=s(2).Number.isNaN},276:function(t,e,s){var i=s(7);i(i.S,"Number",{isNaN:function(t){return t!=t}})},277:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animated fadeIn"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[t.alert.message?s("div",{class:"alert "+t.alert.type},[t._v(t._s(t.alert.message))]):t._e()])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6"},[s("card",{attrs:{"header-text":"Train Options"}},[s("div",{staticClass:"card-body card-block"},[s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col col-md-3"},[s("label",{staticClass:"form-control-label",attrs:{for:"select"}},[t._v("Select Train")])]),t._v(" "),s("div",{staticClass:"col col-md-3"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedTrain,expression:"selectedTrain"}],staticClass:"form-control",attrs:{id:"trainList"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedTrain=e.target.multiple?s:s[0]}}},t._l(this.system.train_Array,function(e){return s("option",{key:e.trainid,domProps:{value:e.trainid}},[t._v(t._s(e.trainid))])}),0)]),t._v(" "),s("div",{staticClass:"col col-md-2"},[s("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Grab"},on:{click:function(e){t.GrabTrainClicked(t.selectedTrain)}}})]),t._v(" "),s("div",{staticClass:"col col-md-2"},[s("input",{staticClass:"btn btn-outline-success",attrs:{type:"submit",value:"Release"},on:{click:t.ReleaseTrain}})])])])]),t._v(" "),s("card",{attrs:{"header-text":"Current Route Request"}},[s("div",{staticClass:"col col-md-12"},[s("input",{staticClass:"btn btn-info pull-right",attrs:{type:"submit",value:"Add Route Request"},on:{click:t.AddRouteRequest}})]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped first-td-padding"},[s("thead",[s("tr",[s("td",[t._v("Train Name")]),t._v(" "),s("td",[t._v("Starting Segment")]),t._v(" "),s("td",[t._v("Ending Segment")]),t._v(" "),s("td",[t._v("Status")])])]),t._v(" "),s("tbody",t._l(this.system.train_RouteRequestArray,function(e){return s("tr",{key:e.trainid},[s("td",[t._v(t._s(e.trainid))]),t._v(" "),s("td",[t._v(t._s(e.startingsegment))]),t._v(" "),s("td",[t._v(t._s(e.endingsegment))]),t._v(" "),s("td",[t._v(t._s(e.status))])])}),0)])])]),t._v(" "),s("card",{attrs:{"header-text":"Peripherals"}},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped first-td-padding"},[s("thead",[s("tr",[s("td",[t._v("Peripheral Name")]),t._v(" "),s("td",[t._v("State")]),t._v(" "),s("td",[t._v("Change Peripheral State")])])]),t._v(" "),s("tbody",t._l(this.system.train_PeripheralArray,function(e){return s("tr",{key:e.peripheralid},[s("td",[t._v(t._s(e.peripheralid))]),t._v(" "),s("td",[t._v(t._s(e.state))]),t._v(" "),s("td",[s("input",{staticClass:"btn btn-warning",attrs:{type:"submit",value:"Toggle State"},on:{click:function(s){t.ChangePeripheralState(e.peripheralid,e.state)}}})])])}),0)])])])],1),t._v(" "),s("div",{staticClass:"col-lg-6"},[s("aside",{staticClass:"profile-nav alt"},[s("section",{staticClass:"card"},t._l(this.system.trainstate_Array,function(e){return s("ul",{key:e.ontrack,staticClass:"list-group list-group-flush",attrs:{value:e.ontrack}},[s("li",{staticClass:"list-group-item"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-train"}),t._v(" Currently OnTrack\n                "),s("span",{staticClass:"badge badge-primary pull-right"},[t._v(t._s(e.ontrack))])])]),t._v(" "),s("li",{staticClass:"list-group-item"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-train"}),t._v(" Current Direction\n                "),s("span",{staticClass:"badge badge-danger pull-right"},[t._v(t._s(e.direction))])])]),t._v(" "),s("li",{staticClass:"list-group-item"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-train"}),t._v(" Current Speed\n                "),s("span",{staticClass:"badge badge-success pull-right"},[t._v(t._s(e.dccspeed))])])])])}),0)]),t._v(" "),s("card",{attrs:{"header-text":"Speed Control"}},[s("vue-slider",{attrs:{speedValue:t.speed}},[s("h4",{attrs:{slot:"subheading"},slot:"subheading"},[t._v("Grabbed Train : "+t._s(this.system.driverProperties.trainID))]),t._v(" "),s("template",{slot:"transition"},[t.isPlaying?s("v-avatar",{staticClass:"mb-1 v-avatar--metronome",style:{animationDuration:t.animationDuration},attrs:{color:t.color,size:"12"}}):t._e()],1),t._v(" "),s("template",{slot:"playOrPauseButton"},[s("v-btn",{attrs:{color:t.color,dark:"",depressed:"",fab:""},on:{click:t.toggle}},[s("v-icon",{attrs:{large:""}},[t._v(t._s(t.isPlaying?"mdi-stop":"mdi-play"))])],1)],1),t._v(" "),s("template",{slot:"sliderdiv"},[s("v-slider",{attrs:{color:t.color,"always-dirty":"",min:"0",max:"127"},on:{change:t.SliderSpeedChange},model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}},[s("v-icon",{attrs:{slot:"prepend",color:t.color},on:{click:t.decrement},slot:"prepend"},[t._v("mdi-minus")]),t._v(" "),s("v-icon",{attrs:{slot:"append",color:t.color},on:{click:t.increment},slot:"append"},[t._v("mdi-plus")])],1)],1)],2)],1)],1)]),t._v(" "),s("basix-modal",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}]},[s("h4",{attrs:{slot:"title"},slot:"title"},[t._v("Grabbed Train Name :"+t._s(this.system.driverProperties.trainID))]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[s("card",{attrs:{"header-text":"Route Request"}},[t.alert.message?s("div",{class:"alert "+t.alert.type},[t._v(t._s(t.alert.message))]):t._e(),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-puzzle-piece"})]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.routerequest.startingsegment,expression:"routerequest.startingsegment"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("startingsegment")},attrs:{name:"startingsegment"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.routerequest,"startingsegment",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Select Starting Segment")]),t._v(" "),t._l(this.system.segment_Array,function(e){return s("option",{key:e.segmentid,domProps:{value:e.segmentid}},[t._v(t._s(e.segmentid))])})],2),t._v(" "),t.submitted&&t.errors.has("startingsegment")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("startingsegment")))]):t._e()])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-puzzle-piece"})]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.routerequest.endingsegment,expression:"routerequest.endingsegment"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("endingsegment")},attrs:{name:"endingsegment"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.routerequest,"endingsegment",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Select Ending Segment")]),t._v(" "),t._l(this.system.segment_Array,function(e){return s("option",{key:e.segmentid,domProps:{value:e.segmentid}},[t._v(t._s(e.segmentid))])})],2),t._v(" "),t.submitted&&t.errors.has("endingsegment")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("endingsegment")))]):t._e()])])]),t._v(" "),s("div",{staticClass:"form-actions form-group"},[s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"},on:{click:function(e){t.showModal=!1}}},[s("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" Submit\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"reset"},on:{click:function(e){t.showModal=!1}}},[s("i",{staticClass:"fa fa-ban"}),t._v(" Close\n        ")])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{slot:"footer"},slot:"footer"})])],1)},r=[],a={render:i,staticRenderFns:r};e.a=a},88:function(t,e,s){"use strict";function i(t){s(272)}Object.defineProperty(e,"__esModule",{value:!0});var r=s(256),a=s(277),n=s(0),o=i,l=n(r.a,a.a,!1,o,null,null);e.default=l.exports}});
//# sourceMappingURL=1.build.js.map