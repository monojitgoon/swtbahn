webpackJsonp([1],{248:function(t,e,a){"use strict";var r=a(80),i=a.n(r);e.a=function(){return i.a.create({baseURL:"http://localhost:2048/",withCredentials:!1,headers:{"Content-Type":"text"}})}},255:function(t,e,a){"use strict";var r=a(273),i=a.n(r),s=a(15),n=a.n(s),o=a(248),l=a(22);e.a={name:"trains",data:function(){return{showModal:!1,trainsArray:[],selectedTrain:null,GrabStatus:null,speed:0,interval:null,isPlaying:!1,peripheralArray:[],trainCurrentState:null}},watch:{trainCurrentState:function(t){null!=t&&this.GetTrainStatus(this.grabbedTrain)}},computed:n()({color:function(){return this.speed<20?"indigo":this.speed<40?"teal":this.speed<70?"green":this.speed<100?"orange":"red"},animationDuration:function(){return 20/this.speed+"s"}},Object(l.c)({sessionID:function(t){return t.system.sessionID},driverProperties:function(t){return t.system.driverProperties},trainProperties:function(t){return t.system.trainProperties},alert:function(t){return t.alert}})),created:function(){},mounted:function(){this.InitialSpeedValueLoad(),this.GetTrainList(),this.GetGrabIDAndSessionID(),this.GetGrabbedTrain()},methods:n()({},Object(l.b)("system",["updateDriverProps","updateSession","updateTrainState"]),Object(l.b)("alert",["error"]),{InitialSpeedValueLoad:function(){i()(this.trainProperties.train_Speed)?this.speed=this.trainProperties.train_Speed:this.speed=0},SliderSpeedChange:function(){this.isPlaying&&this.SetDCCSpeed(this.speed)},decrement:function(){this.speed--,this.isPlaying&&this.SetDCCSpeed(this.speed)},increment:function(){this.speed++,this.isPlaying&&this.SetDCCSpeed(this.speed)},toggle:function(){this.isPlaying=!this.isPlaying,this.isPlaying?(this.speed=0==this.speed?1:this.speed,this.SetDCCSpeed(this.speed)):(this.speed=0,this.SetDCCSpeed(this.speed))},ForceStop:function(){this.isPlaying=!1,this.speed=0,this.SetDCCSpeed(this.speed)},AddRouteRequest:function(t){this.showModal=!0},GrabTrainClicked:function(t){0!=this.sessionID?-1===this.driverProperties.grabID?this.updateDriverProps(t):this.error("You can only grab one train!"):this.error("Server Session is not valid anymore, please start server")},ResponseDataFeedback:function(t,e){"invalid session id"==t?(this.UpdatelocalStorage(0,-1),this.TriggerWarningAlert("Session id was not valid anymore")):"invalid grab id"==t?(this.UpdatelocalStorage(0,-1),this.TriggerWarningAlert("Grab id was not valid")):this.TriggerSuccessAlert(e)},GetTrainList:function(){var t=this;this.trainsArray={0:{trainid:"train1",grabbed:"yes"}},Object(o.a)().post("monitor/trains").then(function(e){200==e.status&&(t.trainsArray=e.data)}).catch(function(t){console.error(t)})},ReleaseTrain:function(){0===this.sessionID?-1===this.driverProperties.grabID?this.error("There is no train grabbed yet!"):this.updateDriverPropsPostRelease(this.sessionID,this.driverProperties.grabID):this.error("Server Session is not valid anymore!"),this.ForceStop()},SetDCCSpeed:function(t){alert(t),this.trainProps.train_IsPlaying=!0,this.trainProps.train_Speed=t,this.updateTrainState(this.trainProps)},GetPeripheralList:function(t){return this.peripheralArray={0:{peripheralid:"light1",state:"on"},1:{peripheralid:"light2",state:"on"},2:{peripheralid:"horn",state:"on"}},this.peripheralArray},ChangePeripheralState:function(t,e){var a=this,r=new FormData;r.append("session-id",this.sessionID),r.append("grab-id",this.grabID),r.append("peripheral",t),r.append("state","on"==e?"off":"on"),r.append("track-output","master"),Object(o.a)().post("driver/set-train-peripheral",r).then(function(t){200==t.status&&a.GetPeripheralList(a.grabbedTrain)}).catch(function(t){console.error(t)})},GetTrainStatus:function(t){var e=this,a=new FormData;a.append("train",t),Object(o.a)().post("monitor/train-state",a).then(function(t){e.trainCurrentState=t.data}).catch(function(t){console.error(t)})}})}},271:function(t,e,a){var r=a(272);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(6)("0a995c84",r,!0,{})},272:function(t,e,a){e=t.exports=a(1)(!1),e.push([t.i,"",""])},273:function(t,e,a){t.exports={default:a(274),__esModule:!0}},274:function(t,e,a){a(275),t.exports=a(2).Number.isNaN},275:function(t,e,a){var r=a(7);r(r.S,"Number",{isNaN:function(t){return t!=t}})},276:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[t.alert.message?a("div",{class:"alert "+t.alert.type},[t._v(t._s(t.alert.message))]):t._e()])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("card",{attrs:{"header-text":"Train Options"}},[a("div",{staticClass:"card-body card-block"},[a("div",{staticClass:"row form-group"},[a("div",{staticClass:"col col-md-3"},[a("label",{staticClass:"form-control-label",attrs:{for:"select"}},[t._v("Select Train")])]),t._v(" "),a("div",{staticClass:"col col-md-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedTrain,expression:"selectedTrain"}],staticClass:"form-control",attrs:{id:"trainList"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedTrain=e.target.multiple?a:a[0]}}},t._l(t.trainsArray,function(e){return a("option",{key:e.trainid,domProps:{value:e.trainid}},[t._v(t._s(e.trainid))])}),0)]),t._v(" "),a("div",{staticClass:"col col-md-2"},[a("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Grab"},on:{click:function(e){t.GrabTrainClicked(t.selectedTrain)}}})]),t._v(" "),a("div",{staticClass:"col col-md-2"},[a("input",{staticClass:"btn btn-outline-success",attrs:{type:"submit",value:"Release"},on:{click:t.ReleaseTrain}})])])])]),t._v(" "),a("card",{attrs:{"header-text":"Current Route Request"}},[a("div",{staticClass:"col col-md-12"},[a("input",{staticClass:"btn btn-info pull-right",attrs:{type:"submit",value:"Add Route Request"},on:{click:function(e){t.AddRouteRequest(t.selectedTrain)}}})]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped first-td-padding"},[a("thead",[a("tr",[a("td",[t._v("Train Name")]),t._v(" "),a("td",[t._v("Starting Segment")]),t._v(" "),a("td",[t._v("Ending Segment")])])]),t._v(" "),a("tbody",t._l(t.peripheralArray,function(e){return a("tr",{key:e.peripheralid},[a("td",[t._v(t._s(e.peripheralid))]),t._v(" "),a("td",[t._v(t._s(e.state))]),t._v(" "),a("td",[a("input",{staticClass:"btn btn-warning",attrs:{type:"submit",value:"Toggle State"},on:{click:function(a){t.ChangePeripheralState(e.peripheralid,e.state)}}})])])}),0)])])]),t._v(" "),a("card",{attrs:{"header-text":"Peripherals"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped first-td-padding"},[a("thead",[a("tr",[a("td",[t._v("Peripheral Name")]),t._v(" "),a("td",[t._v("State")]),t._v(" "),a("td",[t._v("Change Peripheral State")])])]),t._v(" "),a("tbody",t._l(t.driverProperties.train_PeripheralArray,function(e){return a("tr",{key:e.peripheralid},[a("td",[t._v(t._s(e.peripheralid))]),t._v(" "),a("td",[t._v(t._s(e.state))]),t._v(" "),a("td",[a("input",{staticClass:"btn btn-warning",attrs:{type:"submit",value:"Toggle State"},on:{click:function(a){t.ChangePeripheralState(e.peripheralid,e.state)}}})])])}),0)])])])],1),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("card",{attrs:{"header-text":"Current State"}},[t._v(t._s(t.trainCurrentState))]),t._v(" "),a("card",{attrs:{"header-text":"Speed Control"}},[a("vue-slider",{attrs:{speedValue:t.speed}},[a("h4",{attrs:{slot:"subheading"},slot:"subheading"},[t._v("Grabbed Train Name : "+t._s(t.driverProperties.trainID))]),t._v(" "),a("template",{slot:"transition"},[t.isPlaying?a("v-avatar",{staticClass:"mb-1 v-avatar--metronome",style:{animationDuration:t.animationDuration},attrs:{color:t.color,size:"12"}}):t._e()],1),t._v(" "),a("template",{slot:"playOrPauseButton"},[a("v-btn",{attrs:{color:t.color,dark:"",depressed:"",fab:""},on:{click:t.toggle}},[a("v-icon",{attrs:{large:""}},[t._v(t._s(t.trainProperties.train_IsPlaying?"mdi-stop":"mdi-play"))])],1)],1),t._v(" "),a("template",{slot:"sliderdiv"},[a("v-slider",{attrs:{color:t.color,"always-dirty":"",min:"0",max:"127"},on:{change:t.SliderSpeedChange},model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}},[a("v-icon",{attrs:{slot:"prepend",color:t.color},on:{click:t.decrement},slot:"prepend"},[t._v("mdi-minus")]),t._v(" "),a("v-icon",{attrs:{slot:"append",color:t.color},on:{click:t.increment},slot:"append"},[t._v("mdi-plus")])],1)],1)],2)],1)],1)]),t._v(" "),a("basix-modal",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],attrs:{large:"true"}},[a("h4",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.driverProperties.trainID))]),t._v(" "),a("card",{attrs:{"header-text":"Route Request"}},[a("div",{staticClass:"card-body card-block"},[a("div",{staticClass:"row form-group"},[a("div",{staticClass:"col col-md-3"},[a("label",{staticClass:"form-control-label",attrs:{for:"select"}},[t._v("Select Starting Segment")])]),t._v(" "),a("div",{staticClass:"col col-md-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedTrain,expression:"selectedTrain"}],staticClass:"form-control",attrs:{id:"trainList"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedTrain=e.target.multiple?a:a[0]}}},t._l(t.trainsArray,function(e){return a("option",{key:e.trainid,domProps:{value:e.trainid}},[t._v(t._s(e.trainid))])}),0)])]),t._v(" "),a("div",{staticClass:"row form-group"},[a("div",{staticClass:"col col-md-3"},[a("label",{staticClass:"form-control-label",attrs:{for:"select"}},[t._v("Select Ending Segment")])]),t._v(" "),a("div",{staticClass:"col col-md-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedTrain,expression:"selectedTrain"}],staticClass:"form-control",attrs:{id:"trainList"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedTrain=e.target.multiple?a:a[0]}}},t._l(t.driverProperties.trainsArray,function(e){return a("option",{key:e.trainid,domProps:{value:e.trainid}},[t._v(t._s(e.trainid))])}),0)])])])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"},on:{click:function(e){t.showModal=!1}}},[a("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" Submit\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"reset"},on:{click:function(e){t.showModal=!1}}},[a("i",{staticClass:"fa fa-ban"}),t._v(" Reset\n      ")])])],1)],1)},i=[],s={render:r,staticRenderFns:i};e.a=s},86:function(t,e,a){"use strict";function r(t){a(271)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(255),s=a(276),n=a(0),o=r,l=n(i.a,s.a,!1,o,null,null);e.default=l.exports}});
//# sourceMappingURL=1.build.js.map